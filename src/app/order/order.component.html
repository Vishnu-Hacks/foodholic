<nav class="navbar navbar-vertical fixed-left navbar-expand-md navbar-light bg-white" id="sidenav-main">
  <div class="container-fluid">
    <!-- Toggler -->
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#sidenav-collapse-main"
      aria-controls="sidenav-main" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <!-- Brand -->
    <a class="navbar-brand pt-0" href="/home">
    </a>
    <!-- User -->
    <!-- <ul class="nav align-items-center d-md-none">
            <li class="nav-item dropdown">
                <a class="nav-link" href="/profile" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <div class="media align-items-center">
                        <span class="avatar avatar-sm rounded-circle">
                            <img alt="..." src="#">
                        </span>
                    </div>
                </a>
                <div class="dropdown-menu dropdown-menu-arrow dropdown-menu-right">
                    <div class=" dropdown-header noti-title">
                        <h6 class="text-overflow m-0">Welcome!</h6>
                    </div>
                    <a href="/profile" class="dropdown-item">
                        <i class="ni ni-single-02"></i>
                        <span>My profile</span>
                    </a>
                    <div class="dropdown-divider"></div>
                    <a href="/logout" class="dropdown-item" onclick="event.preventDefault();">
                        <i class="ni ni-user-run"></i>
                        <span>Logout</span>
                    </a>
                </div>
            </li>
        </ul> -->
    <!-- Collapse -->
    <div class="collapse navbar-collapse" id="sidenav-collapse-main">
      <!-- Collapse header -->
      <div class="navbar-collapse-header d-md-none">
        <div class="row">
          <div class="col-6 collapse-brand">
            <a href="/home">
              <!-- <img src="#"> -->
            </a>
          </div>
          <div class="col-6 collapse-close">
            <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#sidenav-collapse-main"
              aria-controls="sidenav-main" aria-expanded="false" aria-label="Toggle sidenav">
              <span></span>
              <span></span>
            </button>
          </div>
        </div>
      </div>
      <span></span>

      <span></span>

      <ul class="navbar-nav">
        <br>
        <li class="nav-item">
          <a class="nav-link" href="/dashboard">
            <i class="ni ni-tv-2 text-primary"></i> Dashboard
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/incoming">
            <i class="ni ni-basket text-orange"></i>Incoming Orders
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/order">
            <i class="ni ni-basket text-orange"></i>Delivery Orders
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/pickup">
            <i class="ni ni-basket text-orange"></i>Pickup Orders
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/address">
            <i class="ni ni-shop text-info"></i> Address
          </a>
        </li>
      </ul>

    </div>
  </div>
</nav>

<div class="main-content">
  <!--<div class="header pb-8 pt-5 pt-lg-8 d-flex align-items-center" style="background-image: url(../argon/img/theme/profile-cover.jpg); background-size: cover; background-position: center top;">-->
  <div class="header pb-8 pt-5 pt-lg-8 d-flex align-items-center"
    style="background-image: url(assets/default/cover.jpg); background-size: cover; background-position: center top;">
    <!-- Mask -->
    <span class="mask bg-gradient-default opacity-2"></span>
    <nav class="navbar navbar-top navbar-expand-md  navbar-dark" id="navbar-main">
      <div class="container-fluid">
        <!-- Brand -->
        <a class="h4 mb-0 text-white text-uppercase d-none d-lg-inline-block" routerLink="/dashboard">Dashboard</a>
      </div>

    </nav>
  </div>


  <div class="container-fluid mt--7">
    <div class="row">
      <div class="col">
        <div class="card shadow">
          <div class="card-header border-0">
            <form method="GET" action="/orders">
              <div class="row align-items-center">
                <div class="col-8">
                  <h3 class="mb-0">Home Delivery Orders</h3>
                </div>
                <div class="col-4 text-right">
                  <button id="show-hide-filters" class="btn btn-icon btn-1 btn-sm btn-outline-secondary" type="button">
                    <span class="btn-inner--icon"><i id="button-filters" class="ni ni-bold-down"></i></span>
                  </button>
                </div>
              </div>
              <br>
              <div class="tab-content orders-filters">
                <div class="row">

                  <div class="col-md-3">


                    <div class="form-group">

                      <mat-form-field appearance="fill">
                        <mat-label>Filter by status</mat-label>
                        <mat-select [(ngModel)]="statusFilter" name="jds">
                          <mat-option disabled="" selected="" value=""> --
                            Select status -- </mat-option>
                          <mat-option [value]="status.ACCEPTED">Accepted</mat-option>
                          <mat-option [value]="status.STATUS_PACKING">Packing</mat-option>
                          <mat-option [value]="status.STATUS_IN_TRANSIT">In transit</mat-option>
                          <mat-option [value]="status.STATUS_COMPLETED">Completed</mat-option>
                          <mat-option [value]="status.REJECTED">Rejected</mat-option>
                        </mat-select>
                      </mat-form-field>


                    </div>

                  </div>
                  <div class="col-md-3">
                    <div class="form-group">
                      <label class="form-control-label" for="restorant">Search Order<small> (By ID) </small></label>
                      <div class="input-group">
                        <div class="input-group-prepend">
                          <span class="input-group-text">
                            <a href=""><i class="fas fa-search" aria-hidden="true"></i></a></span>
                        </div>
                        <input name="orderid" class="form-control" placeholder="Enter order ID" type="text"
                          [(ngModel)]="orderCodeFilter">
                      </div>
                    </div>
                  </div>

                  <div class="col-md-6">
                    <div class="input-daterange datepicker row align-items-center">
                      <div class="col-md-6">
                        <div class="form-group">
                          <label class="form-control-label">Filter by Date From</label>
                          <div class="input-group">
                            <div class="input-group-prepend">
                              <span class="input-group-text"><i class="ni ni-calendar-grid-58"></i></span>
                            </div>
                            <input name="fromDate" class="form-control" placeholder="Date from" type="text">
                          </div>
                        </div>
                      </div>
                      <div class="col-md-6">
                        <div class="form-group">
                          <label class="form-control-label">To</label>
                          <div class="input-group">
                            <div class="input-group-prepend">
                              <span class="input-group-text"><i class="ni ni-calendar-grid-58"></i></span>
                            </div>
                            <input name="toDate" class="form-control" placeholder="Date to" type="text">
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-3">

                    <div class="form-group">


                      <mat-form-field appearance="fill">
                        <mat-label>Filter by
                          Delivery Speed</mat-label>
                        <mat-select [(ngModel)]="speedFilter" name="select1">
                          <mat-option [value]="deliverySpeed.SPEED_ANY">Any</mat-option>
                          <mat-option [value]="deliverySpeed.SPEED_EXPRESS">Express</mat-option>
                          <mat-option [value]="deliverySpeed.SPEED_STANDARD">Standard</mat-option>
                        </mat-select>
                      </mat-form-field>


                    </div>
                  </div>
                </div>
                <div class="col-md-6 offset-md-6">
                  <div class="row">
                    <div class="col-md-8">
                    </div>

                    <div class="col-md-4">
                      <button type="submit" (click)="fetchOrders()"
                        class="btn btn-secondary btn-md btn-block">Filter</button>
                    </div>
                  </div>
                </div>
              </div>
            </form>
          </div>
          <div class="col-12  offset-md-5" *ngIf="loading">
            <mat-spinner></mat-spinner>
          </div>
          <div class="table-responsive" *ngIf="!loading">
            <table class="table align-items-center">
              <thead class="thead-light">
                <tr>
                  <th scope="col">ID</th>

                  <th class="table-web" scope="col">Delivery Speed</th>
                  <th class="table-web" scope="col">Order time</th>
                  <th class="table-web" scope="col">Distance</th>

                  <th scope="col">Status</th>
                  <th class="table-web" scope="col">
                    <div class="row"> Price <a href=""><i class="fa fa-sort pt-1 mx-1" aria-hidden="true"></i></a>
                    </div>
                  </th>
                  <th scope="col">Actions</th>
                </tr>
              </thead>
              <tbody *ngFor="let o of orders">
                <tr>
                  <td>
                    <!--<span class="text-primary order_id" name="order-id" style="cursor:pointer" value='602' data-toggle="modal" data-target="#modal-order-details">602</span>-->
                    <a class="btn badge badge-success badge-pill"
                      [routerLink]="['/orderdetails',o.orderCode]">{{o.orderCode}}</a>
                  </td>
                  <td class="table-web">
                    {{o.deliverySpeed | uppercase}}
                  </td>
                  <td class="table-web">
                    {{getLocalTime(o.time)}}
                  </td>

                  <td class="table-web">
                    {{o.deliveryDistance}} KM
                  </td>
                  <td>
                    <span class="badge badge-success badge-pill">{{getStatusText(o.status)}}</span>
                  </td>
                  <td class="table-web">
                    {{o.finalPrice | currency : 'INR'}}
                  </td>
                  <td *ngIf="isLoading(o.orderCode)">
                    <mat-progress-bar mode="indeterminate"></mat-progress-bar>

                  </td>
                  <td class="table-web" *ngIf="!isLoading(o.orderCode)">
                    <div class="form-group">
                      <a href="/receipt/{{o.orderCode}}" target="_blank"><span class="material-icons">
                          print
                        </span></a>
                      <mat-form-field appearance="fill">
                        <mat-label>Change status</mat-label>
                        <mat-select (selectionChange)="updateStatus(o,$event)">
                          <mat-option disabled="" selected="" value=""> --
                            Select status -- </mat-option>
                          <mat-option [value]="status.ACCEPTED">Accepted</mat-option>
                          <mat-option [value]="status.STATUS_PACKING">Packing</mat-option>
                          <mat-option [value]="status.STATUS_IN_TRANSIT">In transit</mat-option>
                          <mat-option [value]="status.STATUS_COMPLETED">Completed</mat-option>
                          <mat-option [value]="status.REJECTED">Rejected</mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                  </td>

                </tr>
              </tbody>
            </table>
          </div>
          <div class="card-footer py-4">
            <nav class="d-flex justify-content-end" aria-label="...">
              <ul class="pagination" role="navigation">

                <li class="page-item disabled" aria-disabled="true" aria-label="« Previous">
                  <span class="page-link" aria-hidden="true">‹</span>
                </li>

                <li class="page-item">
                  <a class="page-link" href="#2" rel="next" aria-label="Next »">›</a>
                </li>
              </ul>

            </nav>
          </div>
        </div>
      </div>
    </div>
    <div class="modal fade" id="modal-asign-driver" tabindex="-1" role="dialog" aria-labelledby="modal-form"
      aria-hidden="true">
      <div class="modal-dialog modal- modal-dialog-centered modal-" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h6 class="modal-title" id="modal-title-new-item">Assign Refund</h6>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">×</span>
            </button>
          </div>
          <div class="modal-body p-0">
            <div class="card shadow border-0">
              <div class="card-body px-lg-5 py-lg-5">
                <form id="form-assing-driver" method="GET" action="#">
                  <div class="form-group">
                    <label class="form-control-label" for="drive">Select Item</label>
                    <select class="form-control select2 select2-hidden-accessible" name="driver" tabindex="-1"
                      aria-hidden="true" style="padding-bottom: 35px;" multiple>
                      <option disabled="" value=""> -- Select
                        Items -- </option>
                      <option value="0">All items</option>
                      <option value="1">Demo Item</option>
                      <option value="2">Demo Item</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label class="form-control-label" for="restorant">Enter Refund Amount</label>
                    <div class="input-group">
                      <div class="input-group-prepend">
                        <span class="input-group-text"><i class="ni ni-money-coins"></i></span>
                      </div>
                      <input name="refundamount" class="form-control" placeholder="Amount" type="text">
                    </div>
                  </div>
                  <div class="text-center">
                    <button type="submit" class="btn btn-primary my-4">Refund</button>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
